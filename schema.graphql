enum Action {
  Compounded
  Relocked
  ExpiredLocksRemoved
  Disqualified
  Locked
  NewTransferAdded
}

interface UserTransaction {
  id: ID!
  txHash: Bytes!
  action: Action!
  user: User!
  timestamp: Int!
}

interface AssetTransaction {
  id: ID!
  txHash: Bytes!
  action: Action!
  asset: Asset!
  timestamp: Int!
}

type Compounded implements UserTransaction @entity {
  id: ID!
  txHash: Bytes!
  action: Action!
  user: User!
  timestamp: Int!

  amount: BigInt! # uint256
}

type Relocked implements UserTransaction @entity {
  id: ID!
  txHash: Bytes!
  action: Action!
  user: User!
  timestamp: Int!

  amount: BigInt!
  lockIndex: BigInt!
}

type Locked implements UserTransaction @entity {
  id: ID!
  txHash: Bytes!
  action: Action!
  user: User!
  timestamp: Int!

  usdValue: BigInt!
  isLP: Boolean!
}

type NewTransferAdded implements AssetTransaction @entity {
  id: ID!
  txHash: Bytes!
  action: Action!
  asset: Asset!
  timestamp: Int!

  usdValue: BigInt!
  lpUsdValue: BigInt!
}

type ExpiredLocksRemoved implements UserTransaction @entity {
  id: ID!
  txHash: Bytes!
  action: Action!
  user: User!
  timestamp: Int!

  unlockable: BigInt!
  ineligInRdnt: BigInt!
}

type Disqualified implements UserTransaction @entity {
  id: ID!
  txHash: Bytes!
  action: Action!
  user: User!
  timestamp: Int!

  rewardsRemoved: BigInt!
}

type TotalLocked @entity {
  id: ID!
  totalLocked: BigInt!
}

type UsdTransfered @entity {
  id: ID!
  totalUsdTransfered: BigInt!
  totalLpUsdTransfered: BigInt!
}

type User @entity {
  id: ID!
  compounded: [Compounded!]! @derivedFrom(field: "user")
  relocked: [Relocked!]! @derivedFrom(field: "user")
  expiredLocksRemoved: [ExpiredLocksRemoved!]! @derivedFrom(field: "user")
  disqualified: [Disqualified!]! @derivedFrom(field: "user")
  locked: [Locked!]! @derivedFrom(field: "user")
}

type Asset @entity {
  id: ID!
  newTransferAdded: [NewTransferAdded!]! @derivedFrom(field: "asset")
}

type BetaTester @entity {
  id: ID!
  lpLocked: BigInt!
}
